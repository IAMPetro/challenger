<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Challenger.js</title>
  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/tomorrow-night-eighties.min.css">
  <link rel="stylesheet" href="challenger.min.css">
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="challenger-demo">
    <div class="space-filler"></div>
    <header>
      <h1>Challenger.js</h1>
      <p>Pop-up JavaScript challenges in your browser</p>
      <ul class="demos">
        <li class="try">
          <p><span class="small">Try these</span>demos:</p>
        </li>
        <li>
          <button id="single">
            <img src="single.svg" height="144" width="144" alt="single">
            <p>Try a single challenge</p>
          </button>
        </li>
        <li>
          <button id="series">
            <img src="series.svg" height="144" width="144" alt="series">
            <p>Try a series of challenges</p>
          </button>
        </li>
      </ul>
      <nav>
        <ul>
          <li><a href="#about">About</a></li>
          <li><a href="#usage">Usage</a></li>
          <li><a href="#install">Install</a></li>
          <li><a href="https://github.com/rileyjshaw/challenger" target="_blank">GitHub</a></li>
        </ul>
      </nav>
    </header>

    <div id="about" class="section">
      <p>Challenger is a drop-in JavaScript library that adds interactive programming challenges to any page. Challenges are flexible and expressive, and are super simple to write.</p>
      <p>A challenge has requirements based on code structure and program output, and gives users a code editor to experiment in. When new code is written, it's run in a sandbox and the output is analyzed.</p>
      <p>Challenges can be presented as one-off tests or linked together to form courses.</p>
    </div>

    <h2 id="usage">Usage</h2>
    <h3>Writing challenges</h3>
    <div class="section">
      <p>Challenges are defined as simple JavaScript objects. The following optional keys can be set:</p>
      <ul>
        <li><p><code class="language-js">title</code>— the challenge's title</p></li>
        <li><p><code class="language-js">description</code>— a short description of the challenge</p></li>
        <li><p><code class="language-js">initialCode</code>— text to be loaded into the code editor on initialization</p></li>
        <li><p><code class="language-js">whitelist</code>— an array of <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Parser_API">ParserAPI</a> strings, indicating expressions that must exist in the student's code</p></li>
        <li><p><code class="language-js">blacklist</code>— same as whitelist, but these expressions must not exist in the student's code</p></li>
        <li><p><code class="language-js">nestedRules</code>— an object indicating nested requirements. Naming conventions are consistent with the <code class="language-js">whitelist</code> and <code class="language-js">blacklist</code>, but each expression key can take another nested object as its value. Setting the <code class="language-js">required</code> attribute on an expression indicates when the expression is required or disallowed. For example:</p>
          <pre><code class="language-js">// indicates that the student must include an if statement within a while
// statement, but must not include a for statement within a while statement.
var challenge = {
  // ...
  nestedRules: {
    WhileStatement: {
      IfStatement: {
        required: true
      },
      ForStatement: {
        required: false
      }
    }
  }
};</code></pre>
        </li>
        <li><p><code class="language-js">customRules</code>— an array of objects describing custom rules. Each object must have two keys:
          <ul>
            <li><p><code class="language-js">description</code>— a string that describes the rule</p></li>
            <li><p><code class="language-js">verify</code>— a function that takes the current user input as a string and returns a boolean</p></li></li>
          </ul>
          <p>For example:</p>
          <pre><code class="language-js">var challenge = {
  // ...
  customRules: [
    {
      description: 'Program must have the word \'foobar\' in it',
      verify: function (str) { return str.indexOf('foobar') > -1; }
    },
    {
      description: 'Program must be under 140 characters',
      verify: function (str) { return str.length < 140; }
    }
  ]
};</code></pre>
        </li>
        <li><p><code class="language-js">output</code>— an object specifying the program's expected behavior. The following keys can be set:</p>
          <ul>
            <li><p><code class="language-js">description</code>— a string that describes the rule</p></li>
            <li><p><code class="language-js">setup</code>— a string of code to run before the user's code</p></li>
            <li><p><code class="language-js">verify</code>— a function that accepts non-object, non-function arguments and returns a boolean. It is aliased to <code class="language-js">__verify__</code> in the challenge, and can be called from <code class="language-js">setup</code> and <code class="language-js">teardown</code></p></li>
            <li><p><code class="language-js">teardown</code>— a string of code to run after the user's code</p></li>
          </ul>
          <p>For example:</p>
          <pre><code class="language-js">// outer variables
var unsorted = [6, 1, 8, 6, 7, 2, 4, 3, 1];
var expected = unsorted.sort((a, b) => a > b);

var challenge = {
  // ...
  output: {
    description: 'Program must sort an array of ints called "unsorted" in ' +
                 'ascending order and save it to a variable called "sorted"',
    setup: `var unsorted = [${unsorted}];`,
    verify: (...sorted) => sorted.every((n, i) => n === expected[i]),
    teardown: 'if (Array.isArray(sorted)) __verify__(...sorted);'
  }
};</code></pre>
          <p>Note: the above snippet uses features of ECMAScript 6. Good news: <em>users can write their challenges using ES6</em> and it will be transpiled to ES5 before running!</p>
        </li>
      </ul>

      <h3>Running challenges</h3>
      <p>To load a single challenge, pass its object into the <code class="language-js">challenger</code> function:</p>
      <pre><code class="language-js">var challenger = require('challenger');

var newChallenge = {
  title: 'My new challenge',
  description: 'It\'s all about the Pentiums',
  whitelist: ['DoWhileStatement']
};

challenger.loadCourse(newChallenge);</code></pre>

      <p>To create a course out of multiple challenges in sequence, pass an array of challenges into the <code class="language-js">challenger</code> function:</p>
      <pre><code class="language-js">// ...
challenger.loadCourse([challenge1, challenge2, challenge3/*, ... */]);</code></pre>

      <p>The <code class="language-js">challenger</code> function can accept an options object as its last argument. The following keys can be set:</p>
      <ul>
        <li><p><code class="language-js">parent</code>— DOM Node to insert the challenge into. Defaults to <code class="language-js">document.body</code></p></li>
        <li><p><code class="language-js">onExit(success)</code>— a callback function to run when the challenge is closed; <code class="language-js">success</code> is boolean</p></li>
        <li><p><code class="language-js">successText</code>— a string to display when the user is successful</p></li>
      </ul>
    </div>

    <h2 id="install">Installation</h2>
    <div class="section">
      <p>To install the library, use <a href="https://www.npmjs.com/package/challenger">npm</a> or <a href="http://bower.io/">bower</a>:</p>
      <pre><code class="language-bash">bower install challenger # or...
npm install challenger</code></pre>
      <p>Challenger is also hosted on <a href="https://github.com/rileyjshaw/challenger" target="_blank">GitHub</a> and <a href="https://cdnjs.com/libraries/challenger" target="_blank">cdnjs</a>.</p>
      <p>All necessary files exist within the <code>/client/dist/</code> directory:</p>
      <ul>
        <li><p><code>challenger.min.js</code>— the main library file</p></li>
        <li><p><code>challenger.min.css</code>— the base stylesheet. Even if you plan on restyling the challenges, it's recommended that you include this; it will give the challenges some initial structure to work with</p></li>
        <li><p><code>operative.min.js</code>— helper module, required if running <code class="language-js">output</code> rules in IE10</p></li>
      </ul>
      <p>Sadly if you need to use IE10 with <code classs="language-javascript">output</code> rules, <code class="language-js">require('challenger')</code> won't work without also copying <code>operative.min.js</code> to the same folder as your script. Challenger runs all client code in a sandboxed Worker or iframe, and certain components need to be broken out and re-loaded into the sandbox. For more information on how sandboxing is implemented, check out <a href="https://github.com/padolsey/operative" target="_blank">operative</a>.</p>

      <h3>Browser support</h3>

      <table class="browser-support">
        <tr>
          <th>
            <img src="firefox.png" alt="Mozilla Firefox" title="Mozilla Firefox">
          </th>
          <th>
            <img src="chrome.png" alt="Google Chrome" title="Google Chrome">
          </th>
          <th>
            <img src="opera.png" alt="Opera" title="Opera">
          </th>
          <th>
            <img src="internet-explorer.png" alt="Internet Explorer" title="Internet Explorer">
          </th>
          <th>
            <img src="safari.png" alt="Safari" title="Safari">
          </th>
          <th>
            <img src="safari.png" class="mobile-safari" alt="Mobile Safari" title="Mobile Safari">
          </th>
        </tr>
        <tr>
          <td>9+</td>
          <td>18+</td>
          <td>15+</td>
          <td>9+</td>
          <td>5.1+</td>
          <td>7+</td>
        </tr>
      </table>

      <p>If you need to support older browsers, include <a href="https://github.com/es-shims/es5-shim">krisowal's es5-shim</a> along with <code>es5-sham.js</code> from the same repository. You might also need to tweak the CSS.</p>
    </div>

    <footer>
      <p>MIT · 2015</p>
      <p><a href="http://rileyjshaw.com">rileyjshaw</a></p>
      <p>...that's all, folks!</p>
    </footer>

  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
  <script src="challenger.min.js"></script>
  <script src="demo.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49939229-11', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
